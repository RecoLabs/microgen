package template

import (
	. "github.com/vetcher/jennifer/jen"
)

const (
	MiddlewareTypeName = "Middleware"
)

type middlewareTemplate struct {
	Info *GenerationInfo
}

func NewMiddlewareTemplate(info *GenerationInfo) Template {
	return &middlewareTemplate{
		Info: info.Duplicate(),
	}
}

// Render middleware decorator
//
//		// This file was automatically generated by "microgen" utility.
//		// Please, do not edit.
//		package middleware
//
//		import svc "github.com/devimteam/microgen/test/svc"
//
//		type Middleware func(svc.StringService) svc.StringService
//
func (t *middlewareTemplate) Render(i *GenerationInfo) *Statement {
	f := Statement{}
	f.Type().Id(MiddlewareTypeName).Func().Call(Qual(t.Info.ServiceImportPath, i.Iface.Name)).Qual(t.Info.ServiceImportPath, i.Iface.Name)
	return &f
}

func (middlewareTemplate) DefaultPath() string {
	return "./middleware/middleware.go"
}
