// This file was automatically generated by "microgen 0.9.0-beta" utility.
// Please, do not change functions names!
package protobuf

import (
	"context"
	"errors"
	generated "github.com/devimteam/microgen/example/generated"
	protobuf "github.com/devimteam/microgen/example/protobuf"
)

func EncodeUppercaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	if request == nil {
		return nil, errors.New("nil UppercaseRequest")
	}
	req := request.(*generated.UppercaseRequest)
	reqStringsMap, err := MapStringStringToProto(req.StringsMap)
	if err != nil {
		return nil, err
	}
	return &protobuf.UppercaseRequest{StringsMap: reqStringsMap}, nil
}

func EncodeCountRequest(_ context.Context, request interface{}) (interface{}, error) {
	if request == nil {
		return nil, errors.New("nil CountRequest")
	}
	req := request.(*generated.CountRequest)
	return &protobuf.CountRequest{
		Symbol: req.Symbol,
		Text:   req.Text,
	}, nil
}

func EncodeTestCaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	if request == nil {
		return nil, errors.New("nil TestCaseRequest")
	}
	req := request.(*generated.TestCaseRequest)
	reqComments, err := ListPtrEntityCommentToProto(req.Comments)
	if err != nil {
		return nil, err
	}
	return &protobuf.TestCaseRequest{Comments: reqComments}, nil
}

func EncodeUppercaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	if response == nil {
		return nil, errors.New("nil UppercaseResponse")
	}
	resp := response.(*generated.UppercaseResponse)
	return &protobuf.UppercaseResponse{Ans: resp.Ans}, nil
}

func EncodeCountResponse(_ context.Context, response interface{}) (interface{}, error) {
	if response == nil {
		return nil, errors.New("nil CountResponse")
	}
	resp := response.(*generated.CountResponse)
	respPositions, err := ListIntToProto(resp.Positions)
	if err != nil {
		return nil, err
	}
	return &protobuf.CountResponse{
		Count:     int64(resp.Count),
		Positions: respPositions,
	}, nil
}

func EncodeTestCaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	if response == nil {
		return nil, errors.New("nil TestCaseResponse")
	}
	resp := response.(*generated.TestCaseResponse)
	respTree, err := MapStringIntToProto(resp.Tree)
	if err != nil {
		return nil, err
	}
	return &protobuf.TestCaseResponse{Tree: respTree}, nil
}

func DecodeUppercaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	if request == nil {
		return nil, errors.New("nil UppercaseRequest")
	}
	req := request.(*protobuf.UppercaseRequest)
	reqStringsMap, err := ProtoToMapStringString(req.StringsMap)
	if err != nil {
		return nil, err
	}
	return &generated.UppercaseRequest{StringsMap: reqStringsMap}, nil
}

func DecodeCountRequest(_ context.Context, request interface{}) (interface{}, error) {
	if request == nil {
		return nil, errors.New("nil CountRequest")
	}
	req := request.(*protobuf.CountRequest)
	return &generated.CountRequest{
		Symbol: string(req.Symbol),
		Text:   string(req.Text),
	}, nil
}

func DecodeTestCaseRequest(_ context.Context, request interface{}) (interface{}, error) {
	if request == nil {
		return nil, errors.New("nil TestCaseRequest")
	}
	req := request.(*protobuf.TestCaseRequest)
	reqComments, err := ProtoToListPtrEntityComment(req.Comments)
	if err != nil {
		return nil, err
	}
	return &generated.TestCaseRequest{Comments: reqComments}, nil
}

func DecodeUppercaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	if response == nil {
		return nil, errors.New("nil UppercaseResponse")
	}
	resp := response.(*protobuf.UppercaseResponse)
	return &generated.UppercaseResponse{Ans: string(resp.Ans)}, nil
}

func DecodeCountResponse(_ context.Context, response interface{}) (interface{}, error) {
	if response == nil {
		return nil, errors.New("nil CountResponse")
	}
	resp := response.(*protobuf.CountResponse)
	respPositions, err := ProtoToListInt(resp.Positions)
	if err != nil {
		return nil, err
	}
	return &generated.CountResponse{
		Count:     int(resp.Count),
		Positions: respPositions,
	}, nil
}

func DecodeTestCaseResponse(_ context.Context, response interface{}) (interface{}, error) {
	if response == nil {
		return nil, errors.New("nil TestCaseResponse")
	}
	resp := response.(*protobuf.TestCaseResponse)
	respTree, err := ProtoToMapStringInt(resp.Tree)
	if err != nil {
		return nil, err
	}
	return &generated.TestCaseResponse{Tree: respTree}, nil
}
